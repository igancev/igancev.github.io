---
title: Не работает wifi после пробуждения из спящего режима на линуксе
excerpt: Решение проблемы, когда после пробуждения из спящего режима на ОС на базе GNU/Linux не поднимается wifi. Wifi сетей не видно, и в трее отображаются ошибки "device not managed", "not ready"  
keywords: device not managed, not ready, linux, wifi, arch linux, manjaro, i3wm
key: wifi-device-not-managed-not-ready
tags: wifi manjaro i3wm arch linux
slug: wifi-device-not-managed-not-ready
mainImage: /assets/articles/wifi-device-not-managed-not-ready/wifi-not-work.jpg
---

<img alt="Фотография, брусок дерева вставлен в землю, вокруг зеленая трава. На бруске нарисована иконка wifi, надпись no wifi zone, рядом лежит лопата" src="/assets/articles/wifi-device-not-managed-not-ready/wifi-not-work.jpg"/>

Решение проблемы, когда после пробуждения из спящего режима, на ОС на базе GNU/Linux не поднимается wifi. 
Wifi сетей не видно, и в трее отображаются ошибки **device not managed**, **not ready**
<!--more-->

Статья написана с расчетом на индексацию одной коварной, неприятной низкочастотной ошибки,
которую сам долго не мог решить, и наконец таки решил не без совета добрых людей 
[https://t.me/johenews/723?comment=34811](https://t.me/johenews/723?comment=34811). Надеюсь кому-нибудь
кроме меня будет полезной. 
{:.info}

## Описание проблемы

Ровно год меня периодически беспокоила следующая проблема. На моем ноутбуке *Lenovo Lenovo Legion 5 15ARH05*, при выходе
из спящего режима, т.е. при открытии крышки ноутбука, система не всегда подключалась к wifi сети. Причем wifi адаптер
переставал работать. Не было видно ни одной сети в радиусе. И при этом в трее, в контекстном меню при клике на иконку
сети, отображалось две ошибки:

- **device not managed**
- **not ready**

которые циклично сменяли друг друга бесконечно.

Что только не пытался сделать, никакие манипуляции не приводили к успеху. Если вы спросите:
*"Перезапускал ли я службу NetworkManager"*, то я отвечу: *"Да, перезапускал, командой"* 
`sudo systemctl restart NetworkManager`, и к результату это не приводило. Заставить заработать сеть помогала 
перезагрузка системы, или повторное открытие/закрытие крышки ноутбука, в надежде, что этот лотерейный билет на этот
раз даст выигрыш.

По ощущениям примерно один раз из пяти выходов из спящего режима заканчивался неудачей, но закономерности в этом
не было. В тот момент, когда у тебя нет интернета, гуглить что - то становится проблематичным, т.к. это нужно делать
с соседнего устройства. Обычно открываешь ноутбук по делу, и сиюминутно решать проблему без интернета 
зачастую нет времени.

## Решение

Наконец, рабочее решение проблемы подсказал один добрый 
человек [в одном телеграм чатике](https://t.me/johenews/723?comment=34811), и посоветовал он
**отключить "powersafe mode" у адаптера wifi**, 
[ссылка на топик unix.stackexchange.com](https://unix.stackexchange.com/questions/269661/how-to-turn-off-wireless-power-management-permanently).

### Отключение powersafe mode у адаптера wifi

Делается это следующим образом:

1. Открываем на редактирование, или создаем при отсутствии следующий файл:
  ```bash
  sudo nano /etc/NetworkManager/conf.d/default-wifi-powersave-on.conf
  ```
  вместо `nano` можно использовать привычный вам редактор, например `vim`
2. Копируем следующее содержимое 
  ```bash
[connection]
wifi.powersave = 2
  ```
3. Перезапускаем службу `NetworkManager` для того, чтобы изменения вступили в силу
  ```bash
sudo systemctl restart NetworkManager
  ```
  или перезагружаемся.
  
Список доступных значений настройки `wifi.powersave`:

```
NM_SETTING_WIRELESS_POWERSAVE_DEFAULT (0): use the default value
NM_SETTING_WIRELESS_POWERSAVE_IGNORE  (1): don't touch existing setting
NM_SETTING_WIRELESS_POWERSAVE_DISABLE (2): disable powersave
NM_SETTING_WIRELESS_POWERSAVE_ENABLE  (3): enable powersave
```

Мы установили значение `2`, **disable powersave** т.е. , отключили powersave. В моем случае это решило проблему, чему
я неслыханно рад.

## Заключение

Приключения в мире GNU/Linux не всегда безоблачны. Проблемы есть, встречаются. В отличие от проприетарных систем
с закрытым исходным кодом, таких как Windows или MacOs, в linux системах время от времени приходится воевать
с такими казалось бы банальными вещами, которые кажется должны работать из коробки, ведь это настолько очевидно.

Но с уверенностью могу заявить, что с годами, медленно, но верно, linux все больше и больше пригоден для настольных
систем и ноутбуков. Да, проблемы иногда бывают. Но большинство их них решаются. А со временем они отточатся, и их
процент будет все меньше. Сейчас это и есть "плата за свободу", которую отчасти отнимают у пользователей
закрытых систем корпорации. Изучайте Linux, его экосистему, дающую невероятные возможности,
и иногда ~~вагон с телегой~~ немножко решаемых багов. Всем добра!

## Комментарии

Если вы заметили неточность, знаете больше способов, у вас есть вопросы, или просто хотите это обсудить, 
то [комментарии к данной статье можно оставить под постом в телеграме](https://t.me/igancev_ru/14).

